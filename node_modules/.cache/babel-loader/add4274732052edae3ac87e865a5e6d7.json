{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useMonitorOutput = useMonitorOutput;\n\nvar _useIsomorphicLayoutEffectJs = require(\"./useIsomorphicLayoutEffect.js\");\n\nvar _useCollectorJs = require(\"./useCollector.js\");\n\nfunction useMonitorOutput(monitor, collect, onCollect) {\n  const [collected, updateCollected] = (0, _useCollectorJs).useCollector(monitor, collect, onCollect);\n  (0, _useIsomorphicLayoutEffectJs).useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    const handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}","map":{"version":3,"mappings":";;;;;QAIgBA;;AAH0B,gCAAgC,4CAAhC;;AACb,mBAAmB,+BAAnB;;SAEbA,iBACfC,SACAC,SACAC,WACY;EACZ,MAAK,CAAEC,SAAF,EAAaC,eAAb,IAA4B,IAAIC,eAAJ,EAAgBA,YAAhB,CAAiBL,OAAjB,EAA0BC,OAA1B,EAAmCC,SAAnC,CAAjC;MAEAI,8BAAyBA,0BACxB,SAASC,6BAAT,GAAyC;IACxC,MAAMC,SAAS,GAAGR,OAAO,CAACS,YAART,EAAlB;;IACA,IAAIQ,SAAS,IAAI,IAAjB,EAAuB;MACtB;IACA;;IACD,OAAOR,OAAO,CAACU,sBAARV,CAA+BI,eAA/BJ,EAAgD;MACtDW,UAAU,EAAE,CAACH,SAAD;IAD0C,CAAhDR,CAAP;EAGA,GACD,CAACA,OAAD,EAAUI,eAAV;EAGD,OAAOD,SAAP;AACA","names":["useMonitorOutput","monitor","collect","onCollect","collected","updateCollected","useCollector","useIsomorphicLayoutEffect","subscribeToMonitorStateChange","handlerId","getHandlerId","subscribeToStateChange","handlerIds"],"sources":["../../../src/hooks/useMonitorOutput.ts"],"sourcesContent":["import type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\nimport { useCollector } from './useCollector.js'\n\nexport function useMonitorOutput<Monitor extends HandlerManager, Collected>(\n\tmonitor: Monitor & MonitorEventEmitter,\n\tcollect: (monitor: Monitor) => Collected,\n\tonCollect?: () => void,\n): Collected {\n\tconst [collected, updateCollected] = useCollector(monitor, collect, onCollect)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction subscribeToMonitorStateChange() {\n\t\t\tconst handlerId = monitor.getHandlerId()\n\t\t\tif (handlerId == null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn monitor.subscribeToStateChange(updateCollected, {\n\t\t\t\thandlerIds: [handlerId],\n\t\t\t})\n\t\t},\n\t\t[monitor, updateCollected],\n\t)\n\n\treturn collected\n}\n"]},"metadata":{},"sourceType":"script"}