{"ast":null,"code":"var _jsxFileName = \"/home/hieu/Desktop/MyCoin_front/MyCoin_frontend/src/pages/apps/chat.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react'; // material-ui\n\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, ClickAwayListener, Dialog, Grid, Menu, MenuItem, Popper, Stack, TextField, Typography, useMediaQuery } from '@mui/material'; // third party\n\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react'; // types\n\n// project import\nimport ChatDrawer from 'sections/apps/chat/ChatDrawer';\nimport ChatHistory from 'sections/apps/chat/ChatHistory';\nimport UserAvatar from 'sections/apps/chat/UserAvatar';\nimport UserDetails from 'sections/apps/chat/UserDetails';\nimport { dispatch, useSelector } from 'store';\nimport { getUser, getUserChats, insertChat } from 'store/reducers/chat';\nimport { openDrawer } from 'store/reducers/menu';\nimport MainCard from 'components/MainCard';\nimport IconButton from 'components/@extended/IconButton';\nimport SimpleBar from 'components/third-party/SimpleBar';\nimport { openSnackbar } from 'store/reducers/snackbar'; // assets\n\nimport { AudioMutedOutlined, CloseOutlined, DeleteOutlined, DownloadOutlined, InfoCircleOutlined, MenuFoldOutlined, MenuUnfoldOutlined, MoreOutlined, PaperClipOutlined, PhoneOutlined, PictureOutlined, SendOutlined, SmileOutlined, SoundOutlined, VideoCameraOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst drawerWidth = 320;\nconst Main = styled('main', {\n  shouldForwardProp: prop => prop !== 'open'\n})(_ref => {\n  let {\n    theme,\n    open\n  } = _ref;\n  return {\n    flexGrow: 1,\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.shorter\n    }),\n    marginLeft: `-${drawerWidth}px`,\n    [theme.breakpoints.down('lg')]: {\n      paddingLeft: 0,\n      marginLeft: 0\n    },\n    ...(open && {\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.shorter\n      }),\n      marginLeft: 0\n    })\n  };\n});\n\nconst Chat = () => {\n  _s();\n\n  const theme = useTheme();\n  const matchDownSM = useMediaQuery(theme.breakpoints.down('lg'));\n  const matchDownMD = useMediaQuery(theme.breakpoints.down('md'));\n  const [emailDetails, setEmailDetails] = useState(false);\n  const [user, setUser] = useState({});\n  const [data, setData] = useState([]);\n  const chatState = useSelector(state => state.chat);\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClickSort = event => {\n    setAnchorEl(event === null || event === void 0 ? void 0 : event.currentTarget);\n  };\n\n  const handleCloseSort = () => {\n    setAnchorEl(null);\n  };\n\n  const handleUserChange = () => {\n    setEmailDetails(prev => !prev);\n  };\n\n  const [openChatDrawer, setOpenChatDrawer] = useState(true);\n\n  const handleDrawerOpen = () => {\n    setOpenChatDrawer(prevState => !prevState);\n  };\n\n  const [anchorElEmoji, setAnchorElEmoji] = useState();\n  /** No single type can cater for all elements */\n\n  const handleOnEmojiButtonClick = event => {\n    setAnchorElEmoji(anchorElEmoji ? null : event === null || event === void 0 ? void 0 : event.currentTarget);\n  }; // handle new message form\n\n\n  const [message, setMessage] = useState('');\n  const textInput = useRef(null);\n\n  const handleOnSend = () => {\n    if (message.trim() === '') {\n      dispatch(openSnackbar({\n        open: true,\n        message: 'Message required',\n        variant: 'alert',\n        alert: {\n          color: 'error'\n        },\n        close: false\n      }));\n    } else {\n      const d = new Date();\n      const newMessage = {\n        from: 'User1',\n        to: user.name,\n        text: message,\n        time: d.toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      };\n      setData(prevState => [...prevState, newMessage]);\n      dispatch(insertChat(newMessage));\n    }\n\n    setMessage('');\n  };\n\n  const handleEnter = event => {\n    if ((event === null || event === void 0 ? void 0 : event.key) !== 'Enter') {\n      return;\n    }\n\n    handleOnSend();\n  }; // handle emoji\n\n\n  const onEmojiClick = (event, emojiObject) => {\n    setMessage(message + emojiObject.emoji);\n  };\n\n  const emojiOpen = Boolean(anchorElEmoji);\n  const emojiId = emojiOpen ? 'simple-popper' : undefined;\n\n  const handleCloseEmoji = () => {\n    setAnchorElEmoji(null);\n  }; // close sidebar when widow size below 'md' breakpoint\n\n\n  useEffect(() => {\n    setOpenChatDrawer(!matchDownSM);\n  }, [matchDownSM]);\n  useEffect(() => {\n    setUser(chatState.user);\n  }, [chatState.user]);\n  useEffect(() => {\n    setData(chatState.chats);\n  }, [chatState.chats]);\n  useEffect(() => {\n    // hide left drawer when email app opens\n    dispatch(openDrawer(false));\n    dispatch(getUser(1)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    dispatch(getUserChats(user.name)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(ChatDrawer, {\n      openChatDrawer: openChatDrawer,\n      handleDrawerOpen: handleDrawerOpen,\n      setUser: setUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      theme: theme,\n      open: openChatDrawer,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: emailDetails ? 8 : 12,\n          xl: emailDetails ? 9 : 12,\n          children: /*#__PURE__*/_jsxDEV(MainCard, {\n            content: false,\n            sx: {\n              bgcolor: theme.palette.mode === 'dark' ? 'dark.main' : 'grey.50',\n              pt: 2,\n              pl: 2,\n              borderRadius: emailDetails ? '0' : '0 4px 4px 0'\n            },\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 3,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sx: {\n                  bgcolor: theme.palette.background.paper,\n                  pr: 2,\n                  pb: 2,\n                  borderBottom: `1px solid ${theme.palette.divider}`\n                },\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  justifyContent: \"space-between\",\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(Stack, {\n                      direction: \"row\",\n                      alignItems: \"center\",\n                      spacing: 1,\n                      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                        onClick: handleDrawerOpen,\n                        color: \"secondary\",\n                        size: \"large\",\n                        children: openChatDrawer ? /*#__PURE__*/_jsxDEV(MenuFoldOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 205,\n                          columnNumber: 45\n                        }, this) : /*#__PURE__*/_jsxDEV(MenuUnfoldOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 205,\n                          columnNumber: 68\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(UserAvatar, {\n                        user: {\n                          online_status: user.online_status,\n                          avatar: user.avatar,\n                          name: user.name\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"subtitle1\",\n                          children: user.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 215,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"caption\",\n                          color: \"textSecondary\",\n                          children: [\"Active \", user.lastMessage, \" ago\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 216,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 214,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(Stack, {\n                      direction: \"row\",\n                      alignItems: \"center\",\n                      justifyContent: \"flex-end\",\n                      spacing: 1,\n                      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                        size: \"large\",\n                        color: \"secondary\",\n                        children: /*#__PURE__*/_jsxDEV(PhoneOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 225,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        size: \"large\",\n                        color: \"secondary\",\n                        children: /*#__PURE__*/_jsxDEV(VideoCameraOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 228,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 227,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        onClick: handleUserChange,\n                        size: \"large\",\n                        color: emailDetails ? 'error' : 'secondary',\n                        children: emailDetails ? /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 231,\n                          columnNumber: 43\n                        }, this) : /*#__PURE__*/_jsxDEV(InfoCircleOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 231,\n                          columnNumber: 63\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        onClick: handleClickSort,\n                        size: \"large\",\n                        color: \"secondary\",\n                        children: /*#__PURE__*/_jsxDEV(MoreOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 234,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 233,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n                        id: \"simple-menu\",\n                        anchorEl: anchorEl,\n                        keepMounted: true,\n                        open: Boolean(anchorEl),\n                        onClose: handleCloseSort,\n                        anchorOrigin: {\n                          vertical: 'bottom',\n                          horizontal: 'right'\n                        },\n                        transformOrigin: {\n                          vertical: 'top',\n                          horizontal: 'right'\n                        },\n                        sx: {\n                          p: 0,\n                          '& .MuiMenu-list': {\n                            p: 0\n                          }\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          onClick: handleCloseSort,\n                          children: [/*#__PURE__*/_jsxDEV(DownloadOutlined, {\n                            style: {\n                              paddingRight: 8\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 258,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                            children: \"Archive\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 259,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 257,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          onClick: handleCloseSort,\n                          children: [/*#__PURE__*/_jsxDEV(AudioMutedOutlined, {\n                            style: {\n                              paddingRight: 8\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 262,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                            children: \"Muted\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 263,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 261,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          onClick: handleCloseSort,\n                          children: [/*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                            style: {\n                              paddingRight: 8\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 266,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                            children: \"Delete\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 267,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 265,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(SimpleBar, {\n                  sx: {\n                    overflowX: 'hidden',\n                    height: 'calc(100vh - 410px)',\n                    minHeight: 420\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      pl: 1,\n                      pr: 3\n                    },\n                    children: /*#__PURE__*/_jsxDEV(ChatHistory, {\n                      theme: theme,\n                      user: user,\n                      data: data\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 283,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sx: {\n                  mt: 3,\n                  bgcolor: theme.palette.background.paper,\n                  borderTop: `1px solid ${theme.palette.divider}`\n                },\n                children: /*#__PURE__*/_jsxDEV(Stack, {\n                  children: [/*#__PURE__*/_jsxDEV(TextField, {\n                    inputRef: textInput,\n                    fullWidth: true,\n                    multiline: true,\n                    rows: 4,\n                    placeholder: \"Your Message...\",\n                    value: message,\n                    onChange: e => setMessage(e.target.value.length <= 1 ? e.target.value.trim() : e.target.value),\n                    onKeyPress: handleEnter,\n                    variant: \"standard\",\n                    sx: {\n                      pr: 2,\n                      '& .MuiInput-root:before': {\n                        borderBottomColor: theme.palette.divider\n                      }\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Stack, {\n                    direction: \"row\",\n                    justifyContent: \"space-between\",\n                    alignItems: \"center\",\n                    children: [/*#__PURE__*/_jsxDEV(Stack, {\n                      direction: \"row\",\n                      sx: {\n                        py: 2,\n                        ml: -1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                        sx: {\n                          opacity: 0.5\n                        },\n                        size: \"medium\",\n                        color: \"secondary\",\n                        children: /*#__PURE__*/_jsxDEV(PaperClipOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 307,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 306,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        sx: {\n                          opacity: 0.5\n                        },\n                        size: \"medium\",\n                        color: \"secondary\",\n                        children: /*#__PURE__*/_jsxDEV(PictureOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 310,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 309,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                          ref: anchorElEmoji,\n                          \"aria-describedby\": emojiId,\n                          onClick: handleOnEmojiButtonClick,\n                          sx: {\n                            opacity: 0.5\n                          },\n                          size: \"medium\",\n                          color: \"secondary\",\n                          children: /*#__PURE__*/_jsxDEV(SmileOutlined, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 321,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 313,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(Popper, {\n                          id: emojiId,\n                          open: emojiOpen,\n                          anchorEl: anchorElEmoji,\n                          disablePortal: true,\n                          popperOptions: {\n                            modifiers: [{\n                              name: 'offset',\n                              options: {\n                                offset: [-20, 20]\n                              }\n                            }]\n                          },\n                          children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n                            onClickAway: handleCloseEmoji,\n                            children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                              children: emojiOpen && /*#__PURE__*/_jsxDEV(MainCard, {\n                                elevation: 8,\n                                content: false,\n                                children: /*#__PURE__*/_jsxDEV(Picker, {\n                                  onEmojiClick: onEmojiClick,\n                                  skinTone: SKIN_TONE_MEDIUM_DARK,\n                                  disableAutoFocus: true\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 343,\n                                  columnNumber: 37\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 342,\n                                columnNumber: 35\n                              }, this)\n                            }, void 0, false)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 339,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 323,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 312,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        sx: {\n                          opacity: 0.5\n                        },\n                        size: \"medium\",\n                        color: \"secondary\",\n                        children: /*#__PURE__*/_jsxDEV(SoundOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 351,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 350,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 305,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                      color: \"primary\",\n                      onClick: handleOnSend,\n                      size: \"large\",\n                      sx: {\n                        mr: 1.5\n                      },\n                      children: /*#__PURE__*/_jsxDEV(SendOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 355,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), emailDetails && !matchDownMD && /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          xl: 3,\n          children: /*#__PURE__*/_jsxDEV(UserDetails, {\n            user: user,\n            onClose: handleUserChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), matchDownMD && /*#__PURE__*/_jsxDEV(Dialog, {\n          onClose: handleUserChange,\n          open: emailDetails,\n          scroll: \"body\",\n          children: /*#__PURE__*/_jsxDEV(UserDetails, {\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Chat, \"g5ef1FfS3C6Ti2LtLoldcdeZklE=\", false, function () {\n  return [useTheme, useMediaQuery, useMediaQuery, useSelector];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useEffect","useRef","useState","useTheme","styled","Box","ClickAwayListener","Dialog","Grid","Menu","MenuItem","Popper","Stack","TextField","Typography","useMediaQuery","Picker","SKIN_TONE_MEDIUM_DARK","ChatDrawer","ChatHistory","UserAvatar","UserDetails","dispatch","useSelector","getUser","getUserChats","insertChat","openDrawer","MainCard","IconButton","SimpleBar","openSnackbar","AudioMutedOutlined","CloseOutlined","DeleteOutlined","DownloadOutlined","InfoCircleOutlined","MenuFoldOutlined","MenuUnfoldOutlined","MoreOutlined","PaperClipOutlined","PhoneOutlined","PictureOutlined","SendOutlined","SmileOutlined","SoundOutlined","VideoCameraOutlined","drawerWidth","Main","shouldForwardProp","prop","theme","open","flexGrow","transition","transitions","create","easing","sharp","duration","shorter","marginLeft","breakpoints","down","paddingLeft","easeOut","Chat","matchDownSM","matchDownMD","emailDetails","setEmailDetails","user","setUser","data","setData","chatState","state","chat","anchorEl","setAnchorEl","handleClickSort","event","currentTarget","handleCloseSort","handleUserChange","prev","openChatDrawer","setOpenChatDrawer","handleDrawerOpen","prevState","anchorElEmoji","setAnchorElEmoji","handleOnEmojiButtonClick","message","setMessage","textInput","handleOnSend","trim","variant","alert","color","close","d","Date","newMessage","from","to","name","text","time","toLocaleTimeString","hour","minute","handleEnter","key","onEmojiClick","emojiObject","emoji","emojiOpen","Boolean","emojiId","undefined","handleCloseEmoji","chats","display","bgcolor","palette","mode","pt","pl","borderRadius","background","paper","pr","pb","borderBottom","divider","online_status","avatar","lastMessage","vertical","horizontal","p","paddingRight","overflowX","height","minHeight","mt","borderTop","e","target","value","length","borderBottomColor","py","ml","opacity","modifiers","options","offset","mr"],"sources":["/home/hieu/Desktop/MyCoin_front/MyCoin_frontend/src/pages/apps/chat.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\n// material-ui\nimport { useTheme, styled, Theme } from '@mui/material/styles';\nimport { Box, ClickAwayListener, Dialog, Grid, Menu, MenuItem, Popper, Stack, TextField, Typography, useMediaQuery } from '@mui/material';\n\n// third party\nimport Picker, { IEmojiData, SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react';\n\n// types\nimport { History as HistoryProps } from 'types/chat';\nimport { UserProfile } from 'types/user-profile';\n\n// project import\nimport ChatDrawer from 'sections/apps/chat/ChatDrawer';\nimport ChatHistory from 'sections/apps/chat/ChatHistory';\nimport UserAvatar from 'sections/apps/chat/UserAvatar';\nimport UserDetails from 'sections/apps/chat/UserDetails';\nimport { dispatch, useSelector } from 'store';\nimport { getUser, getUserChats, insertChat } from 'store/reducers/chat';\nimport { openDrawer } from 'store/reducers/menu';\nimport MainCard from 'components/MainCard';\nimport IconButton from 'components/@extended/IconButton';\nimport SimpleBar from 'components/third-party/SimpleBar';\n\nimport { openSnackbar } from 'store/reducers/snackbar';\n\n// assets\nimport {\n  AudioMutedOutlined,\n  CloseOutlined,\n  DeleteOutlined,\n  DownloadOutlined,\n  InfoCircleOutlined,\n  MenuFoldOutlined,\n  MenuUnfoldOutlined,\n  MoreOutlined,\n  PaperClipOutlined,\n  PhoneOutlined,\n  PictureOutlined,\n  SendOutlined,\n  SmileOutlined,\n  SoundOutlined,\n  VideoCameraOutlined\n} from '@ant-design/icons';\n\nconst drawerWidth = 320;\n\nconst Main = styled('main', { shouldForwardProp: (prop: string) => prop !== 'open' })(\n  ({ theme, open }: { theme: Theme; open: boolean }) => ({\n    flexGrow: 1,\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.shorter\n    }),\n    marginLeft: `-${drawerWidth}px`,\n    [theme.breakpoints.down('lg')]: {\n      paddingLeft: 0,\n      marginLeft: 0\n    },\n    ...(open && {\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.shorter\n      }),\n      marginLeft: 0\n    })\n  })\n);\nconst Chat = () => {\n  const theme = useTheme();\n\n  const matchDownSM = useMediaQuery(theme.breakpoints.down('lg'));\n  const matchDownMD = useMediaQuery(theme.breakpoints.down('md'));\n  const [emailDetails, setEmailDetails] = useState(false);\n  const [user, setUser] = useState<UserProfile>({});\n\n  const [data, setData] = useState<HistoryProps[]>([]);\n  const chatState = useSelector((state) => state.chat);\n  const [anchorEl, setAnchorEl] = useState<Element | ((element: Element) => Element) | null | undefined>(null);\n\n  const handleClickSort = (event: React.MouseEvent<HTMLButtonElement> | undefined) => {\n    setAnchorEl(event?.currentTarget);\n  };\n\n  const handleCloseSort = () => {\n    setAnchorEl(null);\n  };\n\n  const handleUserChange = () => {\n    setEmailDetails((prev) => !prev);\n  };\n\n  const [openChatDrawer, setOpenChatDrawer] = useState(true);\n  const handleDrawerOpen = () => {\n    setOpenChatDrawer((prevState) => !prevState);\n  };\n\n  const [anchorElEmoji, setAnchorElEmoji] = useState<any>(); /** No single type can cater for all elements */\n\n  const handleOnEmojiButtonClick = (event: React.MouseEvent<HTMLButtonElement> | undefined) => {\n    setAnchorElEmoji(anchorElEmoji ? null : event?.currentTarget);\n  };\n\n  // handle new message form\n  const [message, setMessage] = useState('');\n  const textInput = useRef(null);\n\n  const handleOnSend = () => {\n    if (message.trim() === '') {\n      dispatch(\n        openSnackbar({\n          open: true,\n          message: 'Message required',\n          variant: 'alert',\n          alert: {\n            color: 'error'\n          },\n          close: false\n        })\n      );\n    } else {\n      const d = new Date();\n      const newMessage = {\n        from: 'User1',\n        to: user.name,\n        text: message,\n        time: d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      };\n      setData((prevState) => [...prevState, newMessage]);\n      dispatch(insertChat(newMessage));\n    }\n    setMessage('');\n  };\n\n  const handleEnter = (event: React.KeyboardEvent<HTMLDivElement> | undefined) => {\n    if (event?.key !== 'Enter') {\n      return;\n    }\n    handleOnSend();\n  };\n\n  // handle emoji\n  const onEmojiClick = (event: React.MouseEvent<Element, MouseEvent>, emojiObject: IEmojiData) => {\n    setMessage(message + emojiObject.emoji);\n  };\n\n  const emojiOpen = Boolean(anchorElEmoji);\n  const emojiId = emojiOpen ? 'simple-popper' : undefined;\n\n  const handleCloseEmoji = () => {\n    setAnchorElEmoji(null);\n  };\n\n  // close sidebar when widow size below 'md' breakpoint\n  useEffect(() => {\n    setOpenChatDrawer(!matchDownSM);\n  }, [matchDownSM]);\n\n  useEffect(() => {\n    setUser(chatState.user);\n  }, [chatState.user]);\n\n  useEffect(() => {\n    setData(chatState.chats);\n  }, [chatState.chats]);\n\n  useEffect(() => {\n    // hide left drawer when email app opens\n    dispatch(openDrawer(false));\n    dispatch(getUser(1));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    dispatch(getUserChats(user.name));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <ChatDrawer openChatDrawer={openChatDrawer} handleDrawerOpen={handleDrawerOpen} setUser={setUser} />\n      <Main theme={theme} open={openChatDrawer}>\n        <Grid container>\n          <Grid item xs={12} md={emailDetails ? 8 : 12} xl={emailDetails ? 9 : 12}>\n            <MainCard\n              content={false}\n              sx={{\n                bgcolor: theme.palette.mode === 'dark' ? 'dark.main' : 'grey.50',\n                pt: 2,\n                pl: 2,\n                borderRadius: emailDetails ? '0' : '0 4px 4px 0'\n              }}\n            >\n              <Grid container spacing={3}>\n                <Grid\n                  item\n                  xs={12}\n                  sx={{ bgcolor: theme.palette.background.paper, pr: 2, pb: 2, borderBottom: `1px solid ${theme.palette.divider}` }}\n                >\n                  <Grid container justifyContent=\"space-between\">\n                    <Grid item>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n                        <IconButton onClick={handleDrawerOpen} color=\"secondary\" size=\"large\">\n                          {openChatDrawer ? <MenuFoldOutlined /> : <MenuUnfoldOutlined />}\n                        </IconButton>\n                        <UserAvatar\n                          user={{\n                            online_status: user.online_status,\n                            avatar: user.avatar,\n                            name: user.name\n                          }}\n                        />\n                        <Stack>\n                          <Typography variant=\"subtitle1\">{user.name}</Typography>\n                          <Typography variant=\"caption\" color=\"textSecondary\">\n                            Active {user.lastMessage} ago\n                          </Typography>\n                        </Stack>\n                      </Stack>\n                    </Grid>\n                    <Grid item>\n                      <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"flex-end\" spacing={1}>\n                        <IconButton size=\"large\" color=\"secondary\">\n                          <PhoneOutlined />\n                        </IconButton>\n                        <IconButton size=\"large\" color=\"secondary\">\n                          <VideoCameraOutlined />\n                        </IconButton>\n                        <IconButton onClick={handleUserChange} size=\"large\" color={emailDetails ? 'error' : 'secondary'}>\n                          {emailDetails ? <CloseOutlined /> : <InfoCircleOutlined />}\n                        </IconButton>\n                        <IconButton onClick={handleClickSort} size=\"large\" color=\"secondary\">\n                          <MoreOutlined />\n                        </IconButton>\n                        <Menu\n                          id=\"simple-menu\"\n                          anchorEl={anchorEl}\n                          keepMounted\n                          open={Boolean(anchorEl)}\n                          onClose={handleCloseSort}\n                          anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'right'\n                          }}\n                          transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                          }}\n                          sx={{\n                            p: 0,\n                            '& .MuiMenu-list': {\n                              p: 0\n                            }\n                          }}\n                        >\n                          <MenuItem onClick={handleCloseSort}>\n                            <DownloadOutlined style={{ paddingRight: 8 }} />\n                            <Typography>Archive</Typography>\n                          </MenuItem>\n                          <MenuItem onClick={handleCloseSort}>\n                            <AudioMutedOutlined style={{ paddingRight: 8 }} />\n                            <Typography>Muted</Typography>\n                          </MenuItem>\n                          <MenuItem onClick={handleCloseSort}>\n                            <DeleteOutlined style={{ paddingRight: 8 }} />\n                            <Typography>Delete</Typography>\n                          </MenuItem>\n                        </Menu>\n                      </Stack>\n                    </Grid>\n                  </Grid>\n                </Grid>\n                <Grid item xs={12}>\n                  <SimpleBar\n                    sx={{\n                      overflowX: 'hidden',\n                      height: 'calc(100vh - 410px)',\n                      minHeight: 420\n                    }}\n                  >\n                    <Box sx={{ pl: 1, pr: 3 }}>\n                      <ChatHistory theme={theme} user={user} data={data} />\n                    </Box>\n                  </SimpleBar>\n                </Grid>\n                <Grid item xs={12} sx={{ mt: 3, bgcolor: theme.palette.background.paper, borderTop: `1px solid ${theme.palette.divider}` }}>\n                  <Stack>\n                    <TextField\n                      inputRef={textInput}\n                      fullWidth\n                      multiline\n                      rows={4}\n                      placeholder=\"Your Message...\"\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value.length <= 1 ? e.target.value.trim() : e.target.value)}\n                      onKeyPress={handleEnter}\n                      variant=\"standard\"\n                      sx={{\n                        pr: 2,\n                        '& .MuiInput-root:before': { borderBottomColor: theme.palette.divider }\n                      }}\n                    />\n                    <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                      <Stack direction=\"row\" sx={{ py: 2, ml: -1 }}>\n                        <IconButton sx={{ opacity: 0.5 }} size=\"medium\" color=\"secondary\">\n                          <PaperClipOutlined />\n                        </IconButton>\n                        <IconButton sx={{ opacity: 0.5 }} size=\"medium\" color=\"secondary\">\n                          <PictureOutlined />\n                        </IconButton>\n                        <Grid item>\n                          <IconButton\n                            ref={anchorElEmoji}\n                            aria-describedby={emojiId}\n                            onClick={handleOnEmojiButtonClick}\n                            sx={{ opacity: 0.5 }}\n                            size=\"medium\"\n                            color=\"secondary\"\n                          >\n                            <SmileOutlined />\n                          </IconButton>\n                          <Popper\n                            id={emojiId}\n                            open={emojiOpen}\n                            anchorEl={anchorElEmoji}\n                            disablePortal\n                            popperOptions={{\n                              modifiers: [\n                                {\n                                  name: 'offset',\n                                  options: {\n                                    offset: [-20, 20]\n                                  }\n                                }\n                              ]\n                            }}\n                          >\n                            <ClickAwayListener onClickAway={handleCloseEmoji}>\n                              <>\n                                {emojiOpen && (\n                                  <MainCard elevation={8} content={false}>\n                                    <Picker onEmojiClick={onEmojiClick} skinTone={SKIN_TONE_MEDIUM_DARK} disableAutoFocus />\n                                  </MainCard>\n                                )}\n                              </>\n                            </ClickAwayListener>\n                          </Popper>\n                        </Grid>\n                        <IconButton sx={{ opacity: 0.5 }} size=\"medium\" color=\"secondary\">\n                          <SoundOutlined />\n                        </IconButton>\n                      </Stack>\n                      <IconButton color=\"primary\" onClick={handleOnSend} size=\"large\" sx={{ mr: 1.5 }}>\n                        <SendOutlined />\n                      </IconButton>\n                    </Stack>\n                  </Stack>\n                </Grid>\n              </Grid>\n            </MainCard>\n          </Grid>\n          {emailDetails && !matchDownMD && (\n            <Grid item xs={12} md={4} xl={3}>\n              <UserDetails user={user} onClose={handleUserChange} />\n            </Grid>\n          )}\n          {matchDownMD && (\n            <Dialog onClose={handleUserChange} open={emailDetails} scroll=\"body\">\n              <UserDetails user={user} />\n            </Dialog>\n          )}\n        </Grid>\n      </Main>\n    </Box>\n  );\n};\n\nexport default Chat;\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C,C,CAEA;;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAwC,sBAAxC;AACA,SAASC,GAAT,EAAcC,iBAAd,EAAiCC,MAAjC,EAAyCC,IAAzC,EAA+CC,IAA/C,EAAqDC,QAArD,EAA+DC,MAA/D,EAAuEC,KAAvE,EAA8EC,SAA9E,EAAyFC,UAAzF,EAAqGC,aAArG,QAA0H,eAA1H,C,CAEA;;AACA,OAAOC,MAAP,IAA6BC,qBAA7B,QAA0D,oBAA1D,C,CAEA;;AAIA;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,WAAP,MAAwB,gCAAxB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,WAAP,MAAwB,gCAAxB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,SAASC,OAAT,EAAkBC,YAAlB,EAAgCC,UAAhC,QAAkD,qBAAlD;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AAEA,SAASC,YAAT,QAA6B,yBAA7B,C,CAEA;;AACA,SACEC,kBADF,EAEEC,aAFF,EAGEC,cAHF,EAIEC,gBAJF,EAKEC,kBALF,EAMEC,gBANF,EAOEC,kBAPF,EAQEC,YARF,EASEC,iBATF,EAUEC,aAVF,EAWEC,eAXF,EAYEC,YAZF,EAaEC,aAbF,EAcEC,aAdF,EAeEC,mBAfF,QAgBO,mBAhBP;;;AAkBA,MAAMC,WAAW,GAAG,GAApB;AAEA,MAAMC,IAAI,GAAG5C,MAAM,CAAC,MAAD,EAAS;EAAE6C,iBAAiB,EAAGC,IAAD,IAAkBA,IAAI,KAAK;AAAhD,CAAT,CAAN,CACX;EAAA,IAAC;IAAEC,KAAF;IAASC;EAAT,CAAD;EAAA,OAAuD;IACrDC,QAAQ,EAAE,CAD2C;IAErDC,UAAU,EAAEH,KAAK,CAACI,WAAN,CAAkBC,MAAlB,CAAyB,QAAzB,EAAmC;MAC7CC,MAAM,EAAEN,KAAK,CAACI,WAAN,CAAkBE,MAAlB,CAAyBC,KADY;MAE7CC,QAAQ,EAAER,KAAK,CAACI,WAAN,CAAkBI,QAAlB,CAA2BC;IAFQ,CAAnC,CAFyC;IAMrDC,UAAU,EAAG,IAAGd,WAAY,IANyB;IAOrD,CAACI,KAAK,CAACW,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;MAC9BC,WAAW,EAAE,CADiB;MAE9BH,UAAU,EAAE;IAFkB,CAPqB;IAWrD,IAAIT,IAAI,IAAI;MACVE,UAAU,EAAEH,KAAK,CAACI,WAAN,CAAkBC,MAAlB,CAAyB,QAAzB,EAAmC;QAC7CC,MAAM,EAAEN,KAAK,CAACI,WAAN,CAAkBE,MAAlB,CAAyBQ,OADY;QAE7CN,QAAQ,EAAER,KAAK,CAACI,WAAN,CAAkBI,QAAlB,CAA2BC;MAFQ,CAAnC,CADF;MAKVC,UAAU,EAAE;IALF,CAAZ;EAXqD,CAAvD;AAAA,CADW,CAAb;;AAqBA,MAAMK,IAAI,GAAG,MAAM;EAAA;;EACjB,MAAMf,KAAK,GAAGhD,QAAQ,EAAtB;EAEA,MAAMgE,WAAW,GAAGpD,aAAa,CAACoC,KAAK,CAACW,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,CAAjC;EACA,MAAMK,WAAW,GAAGrD,aAAa,CAACoC,KAAK,CAACW,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,CAAjC;EACA,MAAM,CAACM,YAAD,EAAeC,eAAf,IAAkCpE,QAAQ,CAAC,KAAD,CAAhD;EACA,MAAM,CAACqE,IAAD,EAAOC,OAAP,IAAkBtE,QAAQ,CAAc,EAAd,CAAhC;EAEA,MAAM,CAACuE,IAAD,EAAOC,OAAP,IAAkBxE,QAAQ,CAAiB,EAAjB,CAAhC;EACA,MAAMyE,SAAS,GAAGpD,WAAW,CAAEqD,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAA7B;EACA,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0B7E,QAAQ,CAA+D,IAA/D,CAAxC;;EAEA,MAAM8E,eAAe,GAAIC,KAAD,IAA4D;IAClFF,WAAW,CAACE,KAAD,aAACA,KAAD,uBAACA,KAAK,CAAEC,aAAR,CAAX;EACD,CAFD;;EAIA,MAAMC,eAAe,GAAG,MAAM;IAC5BJ,WAAW,CAAC,IAAD,CAAX;EACD,CAFD;;EAIA,MAAMK,gBAAgB,GAAG,MAAM;IAC7Bd,eAAe,CAAEe,IAAD,IAAU,CAACA,IAAZ,CAAf;EACD,CAFD;;EAIA,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCrF,QAAQ,CAAC,IAAD,CAApD;;EACA,MAAMsF,gBAAgB,GAAG,MAAM;IAC7BD,iBAAiB,CAAEE,SAAD,IAAe,CAACA,SAAjB,CAAjB;EACD,CAFD;;EAIA,MAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCzF,QAAQ,EAAlD;EAA2D;;EAE3D,MAAM0F,wBAAwB,GAAIX,KAAD,IAA4D;IAC3FU,gBAAgB,CAACD,aAAa,GAAG,IAAH,GAAUT,KAAV,aAAUA,KAAV,uBAAUA,KAAK,CAAEC,aAA/B,CAAhB;EACD,CAFD,CA/BiB,CAmCjB;;;EACA,MAAM,CAACW,OAAD,EAAUC,UAAV,IAAwB5F,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM6F,SAAS,GAAG9F,MAAM,CAAC,IAAD,CAAxB;;EAEA,MAAM+F,YAAY,GAAG,MAAM;IACzB,IAAIH,OAAO,CAACI,IAAR,OAAmB,EAAvB,EAA2B;MACzB3E,QAAQ,CACNS,YAAY,CAAC;QACXqB,IAAI,EAAE,IADK;QAEXyC,OAAO,EAAE,kBAFE;QAGXK,OAAO,EAAE,OAHE;QAIXC,KAAK,EAAE;UACLC,KAAK,EAAE;QADF,CAJI;QAOXC,KAAK,EAAE;MAPI,CAAD,CADN,CAAR;IAWD,CAZD,MAYO;MACL,MAAMC,CAAC,GAAG,IAAIC,IAAJ,EAAV;MACA,MAAMC,UAAU,GAAG;QACjBC,IAAI,EAAE,OADW;QAEjBC,EAAE,EAAEnC,IAAI,CAACoC,IAFQ;QAGjBC,IAAI,EAAEf,OAHW;QAIjBgB,IAAI,EAAEP,CAAC,CAACQ,kBAAF,CAAqB,EAArB,EAAyB;UAAEC,IAAI,EAAE,SAAR;UAAmBC,MAAM,EAAE;QAA3B,CAAzB;MAJW,CAAnB;MAMAtC,OAAO,CAAEe,SAAD,IAAe,CAAC,GAAGA,SAAJ,EAAee,UAAf,CAAhB,CAAP;MACAlF,QAAQ,CAACI,UAAU,CAAC8E,UAAD,CAAX,CAAR;IACD;;IACDV,UAAU,CAAC,EAAD,CAAV;EACD,CAzBD;;EA2BA,MAAMmB,WAAW,GAAIhC,KAAD,IAA4D;IAC9E,IAAI,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEiC,GAAP,MAAe,OAAnB,EAA4B;MAC1B;IACD;;IACDlB,YAAY;EACb,CALD,CAlEiB,CAyEjB;;;EACA,MAAMmB,YAAY,GAAG,CAAClC,KAAD,EAA+CmC,WAA/C,KAA2E;IAC9FtB,UAAU,CAACD,OAAO,GAAGuB,WAAW,CAACC,KAAvB,CAAV;EACD,CAFD;;EAIA,MAAMC,SAAS,GAAGC,OAAO,CAAC7B,aAAD,CAAzB;EACA,MAAM8B,OAAO,GAAGF,SAAS,GAAG,eAAH,GAAqBG,SAA9C;;EAEA,MAAMC,gBAAgB,GAAG,MAAM;IAC7B/B,gBAAgB,CAAC,IAAD,CAAhB;EACD,CAFD,CAjFiB,CAqFjB;;;EACA3F,SAAS,CAAC,MAAM;IACduF,iBAAiB,CAAC,CAACpB,WAAF,CAAjB;EACD,CAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;EAIAnE,SAAS,CAAC,MAAM;IACdwE,OAAO,CAACG,SAAS,CAACJ,IAAX,CAAP;EACD,CAFQ,EAEN,CAACI,SAAS,CAACJ,IAAX,CAFM,CAAT;EAIAvE,SAAS,CAAC,MAAM;IACd0E,OAAO,CAACC,SAAS,CAACgD,KAAX,CAAP;EACD,CAFQ,EAEN,CAAChD,SAAS,CAACgD,KAAX,CAFM,CAAT;EAIA3H,SAAS,CAAC,MAAM;IACd;IACAsB,QAAQ,CAACK,UAAU,CAAC,KAAD,CAAX,CAAR;IACAL,QAAQ,CAACE,OAAO,CAAC,CAAD,CAAR,CAAR,CAHc,CAId;EACD,CALQ,EAKN,EALM,CAAT;EAOAxB,SAAS,CAAC,MAAM;IACdsB,QAAQ,CAACG,YAAY,CAAC8C,IAAI,CAACoC,IAAN,CAAb,CAAR,CADc,CAEd;EACD,CAHQ,EAGN,CAACpC,IAAD,CAHM,CAAT;EAKA,oBACE,QAAC,GAAD;IAAK,EAAE,EAAE;MAAEqD,OAAO,EAAE;IAAX,CAAT;IAAA,wBACE,QAAC,UAAD;MAAY,cAAc,EAAEtC,cAA5B;MAA4C,gBAAgB,EAAEE,gBAA9D;MAAgF,OAAO,EAAEhB;IAAzF;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,IAAD;MAAM,KAAK,EAAErB,KAAb;MAAoB,IAAI,EAAEmC,cAA1B;MAAA,uBACE,QAAC,IAAD;QAAM,SAAS,MAAf;QAAA,wBACE,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,EAAE,EAAf;UAAmB,EAAE,EAAEjB,YAAY,GAAG,CAAH,GAAO,EAA1C;UAA8C,EAAE,EAAEA,YAAY,GAAG,CAAH,GAAO,EAArE;UAAA,uBACE,QAAC,QAAD;YACE,OAAO,EAAE,KADX;YAEE,EAAE,EAAE;cACFwD,OAAO,EAAE1E,KAAK,CAAC2E,OAAN,CAAcC,IAAd,KAAuB,MAAvB,GAAgC,WAAhC,GAA8C,SADrD;cAEFC,EAAE,EAAE,CAFF;cAGFC,EAAE,EAAE,CAHF;cAIFC,YAAY,EAAE7D,YAAY,GAAG,GAAH,GAAS;YAJjC,CAFN;YAAA,uBASE,QAAC,IAAD;cAAM,SAAS,MAAf;cAAgB,OAAO,EAAE,CAAzB;cAAA,wBACE,QAAC,IAAD;gBACE,IAAI,MADN;gBAEE,EAAE,EAAE,EAFN;gBAGE,EAAE,EAAE;kBAAEwD,OAAO,EAAE1E,KAAK,CAAC2E,OAAN,CAAcK,UAAd,CAAyBC,KAApC;kBAA2CC,EAAE,EAAE,CAA/C;kBAAkDC,EAAE,EAAE,CAAtD;kBAAyDC,YAAY,EAAG,aAAYpF,KAAK,CAAC2E,OAAN,CAAcU,OAAQ;gBAA1G,CAHN;gBAAA,uBAKE,QAAC,IAAD;kBAAM,SAAS,MAAf;kBAAgB,cAAc,EAAC,eAA/B;kBAAA,wBACE,QAAC,IAAD;oBAAM,IAAI,MAAV;oBAAA,uBACE,QAAC,KAAD;sBAAO,SAAS,EAAC,KAAjB;sBAAuB,UAAU,EAAC,QAAlC;sBAA2C,OAAO,EAAE,CAApD;sBAAA,wBACE,QAAC,UAAD;wBAAY,OAAO,EAAEhD,gBAArB;wBAAuC,KAAK,EAAC,WAA7C;wBAAyD,IAAI,EAAC,OAA9D;wBAAA,UACGF,cAAc,gBAAG,QAAC,gBAAD;0BAAA;0BAAA;0BAAA;wBAAA,QAAH,gBAA0B,QAAC,kBAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBAD3C;wBAAA;wBAAA;wBAAA;sBAAA,QADF,eAIE,QAAC,UAAD;wBACE,IAAI,EAAE;0BACJmD,aAAa,EAAElE,IAAI,CAACkE,aADhB;0BAEJC,MAAM,EAAEnE,IAAI,CAACmE,MAFT;0BAGJ/B,IAAI,EAAEpC,IAAI,CAACoC;wBAHP;sBADR;wBAAA;wBAAA;wBAAA;sBAAA,QAJF,eAWE,QAAC,KAAD;wBAAA,wBACE,QAAC,UAAD;0BAAY,OAAO,EAAC,WAApB;0BAAA,UAAiCpC,IAAI,CAACoC;wBAAtC;0BAAA;0BAAA;0BAAA;wBAAA,QADF,eAEE,QAAC,UAAD;0BAAY,OAAO,EAAC,SAApB;0BAA8B,KAAK,EAAC,eAApC;0BAAA,sBACUpC,IAAI,CAACoE,WADf;wBAAA;0BAAA;0BAAA;0BAAA;wBAAA,QAFF;sBAAA;wBAAA;wBAAA;wBAAA;sBAAA,QAXF;oBAAA;sBAAA;sBAAA;sBAAA;oBAAA;kBADF;oBAAA;oBAAA;oBAAA;kBAAA,QADF,eAqBE,QAAC,IAAD;oBAAM,IAAI,MAAV;oBAAA,uBACE,QAAC,KAAD;sBAAO,SAAS,EAAC,KAAjB;sBAAuB,UAAU,EAAC,QAAlC;sBAA2C,cAAc,EAAC,UAA1D;sBAAqE,OAAO,EAAE,CAA9E;sBAAA,wBACE,QAAC,UAAD;wBAAY,IAAI,EAAC,OAAjB;wBAAyB,KAAK,EAAC,WAA/B;wBAAA,uBACE,QAAC,aAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADF;wBAAA;wBAAA;wBAAA;sBAAA,QADF,eAIE,QAAC,UAAD;wBAAY,IAAI,EAAC,OAAjB;wBAAyB,KAAK,EAAC,WAA/B;wBAAA,uBACE,QAAC,mBAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADF;wBAAA;wBAAA;wBAAA;sBAAA,QAJF,eAOE,QAAC,UAAD;wBAAY,OAAO,EAAEvD,gBAArB;wBAAuC,IAAI,EAAC,OAA5C;wBAAoD,KAAK,EAAEf,YAAY,GAAG,OAAH,GAAa,WAApF;wBAAA,UACGA,YAAY,gBAAG,QAAC,aAAD;0BAAA;0BAAA;0BAAA;wBAAA,QAAH,gBAAuB,QAAC,kBAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADtC;wBAAA;wBAAA;wBAAA;sBAAA,QAPF,eAUE,QAAC,UAAD;wBAAY,OAAO,EAAEW,eAArB;wBAAsC,IAAI,EAAC,OAA3C;wBAAmD,KAAK,EAAC,WAAzD;wBAAA,uBACE,QAAC,YAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADF;wBAAA;wBAAA;wBAAA;sBAAA,QAVF,eAaE,QAAC,IAAD;wBACE,EAAE,EAAC,aADL;wBAEE,QAAQ,EAAEF,QAFZ;wBAGE,WAAW,MAHb;wBAIE,IAAI,EAAEyC,OAAO,CAACzC,QAAD,CAJf;wBAKE,OAAO,EAAEK,eALX;wBAME,YAAY,EAAE;0BACZyD,QAAQ,EAAE,QADE;0BAEZC,UAAU,EAAE;wBAFA,CANhB;wBAUE,eAAe,EAAE;0BACfD,QAAQ,EAAE,KADK;0BAEfC,UAAU,EAAE;wBAFG,CAVnB;wBAcE,EAAE,EAAE;0BACFC,CAAC,EAAE,CADD;0BAEF,mBAAmB;4BACjBA,CAAC,EAAE;0BADc;wBAFjB,CAdN;wBAAA,wBAqBE,QAAC,QAAD;0BAAU,OAAO,EAAE3D,eAAnB;0BAAA,wBACE,QAAC,gBAAD;4BAAkB,KAAK,EAAE;8BAAE4D,YAAY,EAAE;4BAAhB;0BAAzB;4BAAA;4BAAA;4BAAA;0BAAA,QADF,eAEE,QAAC,UAAD;4BAAA;0BAAA;4BAAA;4BAAA;4BAAA;0BAAA,QAFF;wBAAA;0BAAA;0BAAA;0BAAA;wBAAA,QArBF,eAyBE,QAAC,QAAD;0BAAU,OAAO,EAAE5D,eAAnB;0BAAA,wBACE,QAAC,kBAAD;4BAAoB,KAAK,EAAE;8BAAE4D,YAAY,EAAE;4BAAhB;0BAA3B;4BAAA;4BAAA;4BAAA;0BAAA,QADF,eAEE,QAAC,UAAD;4BAAA;0BAAA;4BAAA;4BAAA;4BAAA;0BAAA,QAFF;wBAAA;0BAAA;0BAAA;0BAAA;wBAAA,QAzBF,eA6BE,QAAC,QAAD;0BAAU,OAAO,EAAE5D,eAAnB;0BAAA,wBACE,QAAC,cAAD;4BAAgB,KAAK,EAAE;8BAAE4D,YAAY,EAAE;4BAAhB;0BAAvB;4BAAA;4BAAA;4BAAA;0BAAA,QADF,eAEE,QAAC,UAAD;4BAAA;0BAAA;4BAAA;4BAAA;4BAAA;0BAAA,QAFF;wBAAA;0BAAA;0BAAA;0BAAA;wBAAA,QA7BF;sBAAA;wBAAA;wBAAA;wBAAA;sBAAA,QAbF;oBAAA;sBAAA;sBAAA;sBAAA;oBAAA;kBADF;oBAAA;oBAAA;oBAAA;kBAAA,QArBF;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cALF;gBAAA;gBAAA;gBAAA;cAAA,QADF,eA+EE,QAAC,IAAD;gBAAM,IAAI,MAAV;gBAAW,EAAE,EAAE,EAAf;gBAAA,uBACE,QAAC,SAAD;kBACE,EAAE,EAAE;oBACFC,SAAS,EAAE,QADT;oBAEFC,MAAM,EAAE,qBAFN;oBAGFC,SAAS,EAAE;kBAHT,CADN;kBAAA,uBAOE,QAAC,GAAD;oBAAK,EAAE,EAAE;sBAAEjB,EAAE,EAAE,CAAN;sBAASI,EAAE,EAAE;oBAAb,CAAT;oBAAA,uBACE,QAAC,WAAD;sBAAa,KAAK,EAAElF,KAApB;sBAA2B,IAAI,EAAEoB,IAAjC;sBAAuC,IAAI,EAAEE;oBAA7C;sBAAA;sBAAA;sBAAA;oBAAA;kBADF;oBAAA;oBAAA;oBAAA;kBAAA;gBAPF;kBAAA;kBAAA;kBAAA;gBAAA;cADF;gBAAA;gBAAA;gBAAA;cAAA,QA/EF,eA4FE,QAAC,IAAD;gBAAM,IAAI,MAAV;gBAAW,EAAE,EAAE,EAAf;gBAAmB,EAAE,EAAE;kBAAE0E,EAAE,EAAE,CAAN;kBAAStB,OAAO,EAAE1E,KAAK,CAAC2E,OAAN,CAAcK,UAAd,CAAyBC,KAA3C;kBAAkDgB,SAAS,EAAG,aAAYjG,KAAK,CAAC2E,OAAN,CAAcU,OAAQ;gBAAhG,CAAvB;gBAAA,uBACE,QAAC,KAAD;kBAAA,wBACE,QAAC,SAAD;oBACE,QAAQ,EAAEzC,SADZ;oBAEE,SAAS,MAFX;oBAGE,SAAS,MAHX;oBAIE,IAAI,EAAE,CAJR;oBAKE,WAAW,EAAC,iBALd;oBAME,KAAK,EAAEF,OANT;oBAOE,QAAQ,EAAGwD,CAAD,IAAOvD,UAAU,CAACuD,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,MAAf,IAAyB,CAAzB,GAA6BH,CAAC,CAACC,MAAF,CAASC,KAAT,CAAetD,IAAf,EAA7B,GAAqDoD,CAAC,CAACC,MAAF,CAASC,KAA/D,CAP7B;oBAQE,UAAU,EAAEtC,WARd;oBASE,OAAO,EAAC,UATV;oBAUE,EAAE,EAAE;sBACFoB,EAAE,EAAE,CADF;sBAEF,2BAA2B;wBAAEoB,iBAAiB,EAAEtG,KAAK,CAAC2E,OAAN,CAAcU;sBAAnC;oBAFzB;kBAVN;oBAAA;oBAAA;oBAAA;kBAAA,QADF,eAgBE,QAAC,KAAD;oBAAO,SAAS,EAAC,KAAjB;oBAAuB,cAAc,EAAC,eAAtC;oBAAsD,UAAU,EAAC,QAAjE;oBAAA,wBACE,QAAC,KAAD;sBAAO,SAAS,EAAC,KAAjB;sBAAuB,EAAE,EAAE;wBAAEkB,EAAE,EAAE,CAAN;wBAASC,EAAE,EAAE,CAAC;sBAAd,CAA3B;sBAAA,wBACE,QAAC,UAAD;wBAAY,EAAE,EAAE;0BAAEC,OAAO,EAAE;wBAAX,CAAhB;wBAAkC,IAAI,EAAC,QAAvC;wBAAgD,KAAK,EAAC,WAAtD;wBAAA,uBACE,QAAC,iBAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADF;wBAAA;wBAAA;wBAAA;sBAAA,QADF,eAIE,QAAC,UAAD;wBAAY,EAAE,EAAE;0BAAEA,OAAO,EAAE;wBAAX,CAAhB;wBAAkC,IAAI,EAAC,QAAvC;wBAAgD,KAAK,EAAC,WAAtD;wBAAA,uBACE,QAAC,eAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADF;wBAAA;wBAAA;wBAAA;sBAAA,QAJF,eAOE,QAAC,IAAD;wBAAM,IAAI,MAAV;wBAAA,wBACE,QAAC,UAAD;0BACE,GAAG,EAAElE,aADP;0BAEE,oBAAkB8B,OAFpB;0BAGE,OAAO,EAAE5B,wBAHX;0BAIE,EAAE,EAAE;4BAAEgE,OAAO,EAAE;0BAAX,CAJN;0BAKE,IAAI,EAAC,QALP;0BAME,KAAK,EAAC,WANR;0BAAA,uBAQE,QAAC,aAAD;4BAAA;4BAAA;4BAAA;0BAAA;wBARF;0BAAA;0BAAA;0BAAA;wBAAA,QADF,eAWE,QAAC,MAAD;0BACE,EAAE,EAAEpC,OADN;0BAEE,IAAI,EAAEF,SAFR;0BAGE,QAAQ,EAAE5B,aAHZ;0BAIE,aAAa,MAJf;0BAKE,aAAa,EAAE;4BACbmE,SAAS,EAAE,CACT;8BACElD,IAAI,EAAE,QADR;8BAEEmD,OAAO,EAAE;gCACPC,MAAM,EAAE,CAAC,CAAC,EAAF,EAAM,EAAN;8BADD;4BAFX,CADS;0BADE,CALjB;0BAAA,uBAgBE,QAAC,iBAAD;4BAAmB,WAAW,EAAErC,gBAAhC;4BAAA,uBACE;8BAAA,UACGJ,SAAS,iBACR,QAAC,QAAD;gCAAU,SAAS,EAAE,CAArB;gCAAwB,OAAO,EAAE,KAAjC;gCAAA,uBACE,QAAC,MAAD;kCAAQ,YAAY,EAAEH,YAAtB;kCAAoC,QAAQ,EAAElG,qBAA9C;kCAAqE,gBAAgB;gCAArF;kCAAA;kCAAA;kCAAA;gCAAA;8BADF;gCAAA;gCAAA;gCAAA;8BAAA;4BAFJ;0BADF;4BAAA;4BAAA;4BAAA;0BAAA;wBAhBF;0BAAA;0BAAA;0BAAA;wBAAA,QAXF;sBAAA;wBAAA;wBAAA;wBAAA;sBAAA,QAPF,eA6CE,QAAC,UAAD;wBAAY,EAAE,EAAE;0BAAE2I,OAAO,EAAE;wBAAX,CAAhB;wBAAkC,IAAI,EAAC,QAAvC;wBAAgD,KAAK,EAAC,WAAtD;wBAAA,uBACE,QAAC,aAAD;0BAAA;0BAAA;0BAAA;wBAAA;sBADF;wBAAA;wBAAA;wBAAA;sBAAA,QA7CF;oBAAA;sBAAA;sBAAA;sBAAA;oBAAA,QADF,eAkDE,QAAC,UAAD;sBAAY,KAAK,EAAC,SAAlB;sBAA4B,OAAO,EAAE5D,YAArC;sBAAmD,IAAI,EAAC,OAAxD;sBAAgE,EAAE,EAAE;wBAAEgE,EAAE,EAAE;sBAAN,CAApE;sBAAA,uBACE,QAAC,YAAD;wBAAA;wBAAA;wBAAA;sBAAA;oBADF;sBAAA;sBAAA;sBAAA;oBAAA,QAlDF;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QAhBF;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cADF;gBAAA;gBAAA;gBAAA;cAAA,QA5FF;YAAA;cAAA;cAAA;cAAA;YAAA;UATF;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QADF,EAmLG3F,YAAY,IAAI,CAACD,WAAjB,iBACC,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,EAAE,EAAf;UAAmB,EAAE,EAAE,CAAvB;UAA0B,EAAE,EAAE,CAA9B;UAAA,uBACE,QAAC,WAAD;YAAa,IAAI,EAAEG,IAAnB;YAAyB,OAAO,EAAEa;UAAlC;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QApLJ,EAwLGhB,WAAW,iBACV,QAAC,MAAD;UAAQ,OAAO,EAAEgB,gBAAjB;UAAmC,IAAI,EAAEf,YAAzC;UAAuD,MAAM,EAAC,MAA9D;UAAA,uBACE,QAAC,WAAD;YAAa,IAAI,EAAEE;UAAnB;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAzLJ;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAqMD,CAnTD;;GAAML,I;UACU/D,Q,EAEMY,a,EACAA,a,EAKFQ,W;;;KATd2C,I;AAqTN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}