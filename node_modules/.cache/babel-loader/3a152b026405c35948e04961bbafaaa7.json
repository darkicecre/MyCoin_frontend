{"ast":null,"code":"// project imports\nimport services from 'utils/mockAdapter';\nimport { products } from 'data/e-commerce'; // types\n\n// ==============================|| MOCK SERVICES ||============================== //\nservices.onGet('/api/products/list').reply(200, {\n  products\n});\nservices.onPost('/api/products/filter').reply(config => {\n  try {\n    const {\n      filter\n    } = JSON.parse(config.data);\n\n    if (filter.sort === 'high') {\n      products.sort((a, b) => Number(b.offerPrice) - Number(a.offerPrice));\n    }\n\n    if (filter.sort === 'low') {\n      products.sort((a, b) => Number(a.offerPrice) - Number(b.offerPrice));\n    }\n\n    if (filter.sort === 'popularity') {\n      products.sort((a, b) => Number(b.popularity) - Number(a.popularity));\n    }\n\n    if (filter.sort === 'discount') {\n      products.sort((a, b) => Number(b.discount) - Number(a.discount));\n    }\n\n    if (filter.sort === 'new') {\n      products.sort((a, b) => Number(b.new) - Number(a.new));\n    }\n\n    const results = products.filter(product => {\n      let searchMatches = true;\n\n      if (filter.search) {\n        const properties = ['name', 'description', 'rating', 'salePrice', 'offerPrice', 'gender'];\n        let containsQuery = false;\n        properties.forEach(property => {\n          if (product[property] && product[property].toString().toLowerCase().includes(filter.search.toString().toLowerCase())) {\n            containsQuery = true;\n          }\n        });\n\n        if (!containsQuery) {\n          searchMatches = false;\n        }\n      }\n\n      const genderMatches = filter.gender.length > 0 ? filter.gender.some(item => item === product.gender) : true;\n      const categoriesMatches = filter.categories.length > 0 && filter.categories.some(category => category !== 'all') ? filter.categories.some(category => product.categories.some(item => item === category)) : true;\n      const colorsMatches = filter.colors.length > 0 ? filter.colors.some(color => product.colors.some(item => item === color)) : true;\n      const minMax = filter.price ? filter.price.split('-') : '';\n      const priceMatches = filter.price ? product.offerPrice >= minMax[0] && product.offerPrice <= minMax[1] : true;\n      const ratingMatches = filter.rating > 0 ? product.rating >= filter.rating : true;\n      return searchMatches && genderMatches && categoriesMatches && colorsMatches && priceMatches && ratingMatches;\n    });\n    return [200, results];\n  } catch (err) {\n    console.error(err);\n    return [500, {\n      message: 'Internal server error'\n    }];\n  }\n});\nservices.onPost('/api/product/details').reply(config => {\n  try {\n    const {\n      id\n    } = JSON.parse(config.data);\n    let results;\n\n    if (id === 'default') {\n      [results] = products;\n    } else {\n      [results] = products === null || products === void 0 ? void 0 : products.filter(product => product.id === Number(id));\n    }\n\n    return [200, results];\n  } catch (err) {\n    console.error(err);\n    return [500, {\n      message: 'Internal server error'\n    }];\n  }\n});\nservices.onPost('/api/product/related').reply(config => {\n  try {\n    const {\n      id\n    } = JSON.parse(config.data);\n    const results = products.filter(product => product.id !== Number(id));\n    return [200, results];\n  } catch (err) {\n    console.error(err);\n    return [500, {\n      message: 'Internal server error'\n    }];\n  }\n});","map":{"version":3,"names":["services","products","onGet","reply","onPost","config","filter","JSON","parse","data","sort","a","b","Number","offerPrice","popularity","discount","new","results","product","searchMatches","search","properties","containsQuery","forEach","property","toString","toLowerCase","includes","genderMatches","gender","length","some","item","categoriesMatches","categories","category","colorsMatches","colors","color","minMax","price","split","priceMatches","ratingMatches","rating","err","console","error","message","id"],"sources":["/home/hieu/Desktop/MyCoin_front/MyCoin_frontend/src/_api/products.ts"],"sourcesContent":["// project imports\nimport services from 'utils/mockAdapter';\nimport { products } from 'data/e-commerce';\n\n// types\nimport { KeyedObject } from 'types/cart';\nimport { Products } from 'types/e-commerce';\n\n// ==============================|| MOCK SERVICES ||============================== //\n\nservices.onGet('/api/products/list').reply(200, { products });\n\nservices.onPost('/api/products/filter').reply((config) => {\n  try {\n    const { filter } = JSON.parse(config.data);\n\n    if (filter.sort === 'high') {\n      products.sort((a: Products, b: Products) => Number(b.offerPrice) - Number(a.offerPrice));\n    }\n\n    if (filter.sort === 'low') {\n      products.sort((a, b) => Number(a.offerPrice) - Number(b.offerPrice));\n    }\n\n    if (filter.sort === 'popularity') {\n      products.sort((a, b) => Number(b.popularity) - Number(a.popularity));\n    }\n\n    if (filter.sort === 'discount') {\n      products.sort((a, b) => Number(b.discount) - Number(a.discount));\n    }\n\n    if (filter.sort === 'new') {\n      products.sort((a, b) => Number(b.new) - Number(a.new));\n    }\n\n    const results = products.filter((product: KeyedObject) => {\n      let searchMatches = true;\n\n      if (filter.search) {\n        const properties = ['name', 'description', 'rating', 'salePrice', 'offerPrice', 'gender'];\n        let containsQuery = false;\n\n        properties.forEach((property) => {\n          if (product[property] && product[property].toString().toLowerCase().includes(filter.search.toString().toLowerCase())) {\n            containsQuery = true;\n          }\n        });\n\n        if (!containsQuery) {\n          searchMatches = false;\n        }\n      }\n\n      const genderMatches = filter.gender.length > 0 ? filter.gender.some((item: string) => item === product.gender) : true;\n      const categoriesMatches =\n        filter.categories.length > 0 && filter.categories.some((category: string) => category !== 'all')\n          ? filter.categories.some((category: string) => product.categories.some((item: string) => item === category))\n          : true;\n      const colorsMatches =\n        filter.colors.length > 0 ? filter.colors.some((color: string) => product.colors.some((item: string) => item === color)) : true;\n\n      const minMax = filter.price ? filter.price.split('-') : '';\n      const priceMatches = filter.price ? product.offerPrice >= minMax[0] && product.offerPrice <= minMax[1] : true;\n      const ratingMatches = filter.rating > 0 ? product.rating >= filter.rating : true;\n\n      return searchMatches && genderMatches && categoriesMatches && colorsMatches && priceMatches && ratingMatches;\n    });\n\n    return [200, results];\n  } catch (err) {\n    console.error(err);\n    return [500, { message: 'Internal server error' }];\n  }\n});\n\nservices.onPost('/api/product/details').reply((config) => {\n  try {\n    const { id } = JSON.parse(config.data);\n\n    let results;\n    if (id === 'default') {\n      [results] = products;\n    } else {\n      [results] = products?.filter((product) => product.id === Number(id));\n    }\n\n    return [200, results];\n  } catch (err) {\n    console.error(err);\n    return [500, { message: 'Internal server error' }];\n  }\n});\n\nservices.onPost('/api/product/related').reply((config) => {\n  try {\n    const { id } = JSON.parse(config.data);\n\n    const results = products.filter((product) => product.id !== Number(id));\n\n    return [200, results];\n  } catch (err) {\n    console.error(err);\n    return [500, { message: 'Internal server error' }];\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}